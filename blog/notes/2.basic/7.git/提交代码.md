# 提交代码至远程仓库

本地代码初次提交至远程空仓库时需要运行`git init`命令，创建必要的`.git`文件即本地仓库，该文件默认是隐藏的，`.git`文件中存储本项目相关git信息，如后续添加的远程仓库地址，每次提交内容的说明也就是`git commit`等等信息

## 提交代码

origin是远程仓库的别名，github远程仓库的名称默认为origin

`git push -u`是`git push --set-upstream`的缩写，表格关联远程仓库

```sh
# 创建.git文件即本地仓库
git init   
# 添加远程仓库地址
git remote add origin https://git-repo-address.git  
# 保存项目内容至本地仓库
git add . 
# 本次提交的说明
git commit -m "commitText" 
# push时关联远程仓库
git push -u origin master 
```

### 之后提交

```sh
git add . 
git commit -m "commitText" 
# 多人开发的项目每次提交前应先pull拉取代码
# 其他开发者可能比你先提交代码，不拉取直接提交会覆盖他的代码，一般情况下git也会进行提示
git pull 
# 拉取后没有代码冲突（不同开发者修改了相同一处的代码）可以直接提交
git push 
```

> 如果出现代码冲突问题(相同代码处有不同的修改)，这时需要手动在项目中选择保存哪一部分代码，从而解决冲突，然后重新走一遍提交流程

## git stash暂存代码

比如在dev分支开发功能，但功能代码还没写完，要去修复一个线上的bug，这时不适合commit，也不适合直接切换分支（直接切换分支会导致自动合并）

### 不提交的情况下切换分支

会出现以下报错

```sh
error: Your local changes to the following files would be overwritten by checkout:
        test.js
Please commit your changes or stash them before you switch branches.
Aborting
```

这时就需要使用stash命令， 将当前未提交的修改(即，工作区的修改和暂存区的修改)先暂时储藏起来，这样工作区干净了后，就可以切换到master分支，然后再创建一个fix分支。在完成线上bug的修复工作后，重新切换到dev分支

```sh
git stash
git checkout master
```

修改完之后，回到开发分支，执行

```sh
git checkout dev
# 查看储存的修改
git stash list
```

#### 方法一

`git stash apply stash@{index}`表示取出指定储藏中的修改到工作区

`git stash drop stash@{index}`表示将指定index的储藏从储藏记录列表中删除

```sh
# 单个存储
git stash apply
git stash drop
# 多个存储，示例，应用第一个存储
git stash apply stash@{0}
git stash drop stash@{0}
```

#### 方法二:

`git stash pop`可取出最近一次储藏的修改到工作区，并同时将该储藏从储藏记录列表中删除

`git stash pop stash@{index}`表示通过储藏列表的index取出指定储藏中的修改到工作区

```sh
git stash pop
# 多个存储，示例，应用第一个存储
git stash pop stash@{0}
```

## 错误提交进行回退

1.没有`git add`时，用`git checkout -- file`

2.已经`git add`时，先`git reset HEAD <file>`回退到1.，再按1.操作

3.已经`git commit`时，用`git reset`回退版本

4.推送到远程库，GG?