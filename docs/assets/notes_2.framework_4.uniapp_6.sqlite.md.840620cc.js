import { _ as _export_sfc, c as createElementBlock, o as openBlock, a as createStaticVNode } from "./app.dd2b519a.js";
var _imports_0 = "/vite-vue-blog/assets/image-20220331120643467.78a42908.png";
const __pageData = JSON.parse('{"title":"sqlite","description":"","frontmatter":{},"headers":[{"level":2,"title":"uniapp\u4E2D\u5B89\u88C5","slug":"uniapp\u4E2D\u5B89\u88C5"},{"level":2,"title":"\u672C\u5730\u7535\u8111\u5B89\u88C5","slug":"\u672C\u5730\u7535\u8111\u5B89\u88C5"},{"level":2,"title":"\u5B8C\u6574\u8BED\u6CD5","slug":"\u5B8C\u6574\u8BED\u6CD5"},{"level":2,"title":"\u521B\u5EFA\u6216\u4F7F\u7528\u6570\u636E\u5E93","slug":"\u521B\u5EFA\u6216\u4F7F\u7528\u6570\u636E\u5E93"},{"level":2,"title":"\u9000\u51FAsqlite\u547D\u4EE4\u6A21\u5F0F","slug":"\u9000\u51FAsqlite\u547D\u4EE4\u6A21\u5F0F"},{"level":2,"title":"\u521B\u5EFA\u8868","slug":"\u521B\u5EFA\u8868"},{"level":2,"title":"CHAR\u548CVARCHAR\u533A\u522B","slug":"char\u548Cvarchar\u533A\u522B"},{"level":2,"title":"\u5217\u51FA\u6570\u636E\u5E93\u4E2D\u6240\u6709\u8868","slug":"\u5217\u51FA\u6570\u636E\u5E93\u4E2D\u6240\u6709\u8868"},{"level":2,"title":"\u5220\u9664\u8868","slug":"\u5220\u9664\u8868"},{"level":2,"title":"\u63D2\u5165\u6570\u636E\u5230\u8868\u4E2D","slug":"\u63D2\u5165\u6570\u636E\u5230\u8868\u4E2D"},{"level":2,"title":"\u5224\u65AD\u6570\u636E\u5E93\u662F\u5426\u6253\u5F00","slug":"\u5224\u65AD\u6570\u636E\u5E93\u662F\u5426\u6253\u5F00"},{"level":2,"title":"\u5173\u95ED\u6570\u636E\u5E93","slug":"\u5173\u95ED\u6570\u636E\u5E93"},{"level":2,"title":"sqlite.js","slug":"sqlite-js"}],"relativePath":"notes/2.framework/4.uniapp/6.sqlite.md"}');
const _sfc_main = { name: "notes/2.framework/4.uniapp/6.sqlite.md" };
const _hoisted_1 = /* @__PURE__ */ createStaticVNode('<h1 id="sqlite" tabindex="-1">sqlite <a class="header-anchor" href="#sqlite" aria-hidden="true">#</a></h1><blockquote><p><code>SQLite</code>\u662F\u4E00\u4E2A\u8F6F\u4EF6\u5E93\uFF0C\u5B9E\u73B0\u4E86\u81EA\u7ED9\u81EA\u8DB3\u7684\u3001\u65E0\u670D\u52A1\u5668\u7684\u3001\u96F6\u914D\u7F6E\u7684\u3001\u4E8B\u52A1\u6027\u7684 SQL \u6570\u636E\u5E93\u5F15\u64CE\uFF0C\u662F\u4E16\u754C\u4E0A\u6700\u5E7F\u6CDB\u90E8\u7F72\u7684 SQL \u6570\u636E\u5E93\u5F15\u64CE\uFF0C<code>SQLite</code>\u6E90\u4EE3\u7801\u4E0D\u53D7\u7248\u6743\u9650\u5236</p></blockquote><h2 id="uniapp\u4E2D\u5B89\u88C5" tabindex="-1">uniapp\u4E2D\u5B89\u88C5 <a class="header-anchor" href="#uniapp\u4E2D\u5B89\u88C5" aria-hidden="true">#</a></h2><p>\u5728uniapp\u9879\u76EE<code>manifest.json</code>\u7684<code>App\u6A21\u5757\u914D\u7F6E</code>\u4E2D\u52FE\u9009<code>sqlite</code>\uFF0CHBuilderX\u4E2D\u4F7F\u7528\u4E91\u6253\u5305\u65F6\u4F1A\u5728\u6253\u5305\u4E2D\u5B89\u88C5<code>sqlite</code></p><blockquote><p>sqlite\u53EF\u4EE5\u5B58\u50A8140TB\u7684\u6570\u636E\u91CF\uFF0C\u6240\u4EE5\u4E0D\u7528\u62C5\u5FC3sqlite\u5B58\u50A8\u6EE1\u4E86\uFF0C\u53EA\u9700\u5173\u6CE8\u5E94\u7528\u5185\u5B58\uFF0C\u82E5\u6570\u636E\u5E93\u5185\u5BB9\u8FC7\u591A\uFF0C\u63D0\u793A\u7528\u6237\u6E05\u7406</p></blockquote><h2 id="\u672C\u5730\u7535\u8111\u5B89\u88C5" tabindex="-1">\u672C\u5730\u7535\u8111\u5B89\u88C5 <a class="header-anchor" href="#\u672C\u5730\u7535\u8111\u5B89\u88C5" aria-hidden="true">#</a></h2><p>\u53EF\u4EE5\u66F4\u65B9\u4FBF\u5730\u7528\u4E8E\u8FDB\u884C\u4E00\u4E9B\u64CD\u4F5C\u5B66\u4E60</p><ul><li><a href="http://www.sqlite.org/download.html" target="_blank" rel="noopener noreferrer">SQLite\u5B98\u7F51\u4E0B\u8F7D</a></li><li>\u6839\u636E\u7535\u8111\u4F4D\u657032\u621664\u9009\u62E9\u4E0B\u8F7D\u7B2C\u4E00\u4E2A\u6216\u7B2C\u4E8C\u4E2A,\u7B2C\u4E09\u4E2A\u5219\u662F\u5FC5\u987B\u7684\uFF0C\u4E0B\u8F7D\u8FD9\u4E24\u4E2A\u538B\u7F29\u6587\u4EF6<img src="' + _imports_0 + '" alt="image-20220331120643467"></li><li>\u521B\u5EFA\u6587\u4EF6\u5939 sqlite\uFF0C\u5728\u6B64\u6587\u4EF6\u5939\u4E0B\u89E3\u538B\u4E24\u4E2A\u538B\u7F29\u6587\u4EF6\uFF0C\u5C06\u5F97\u5230 sqlite3.def\u3001sqlite3.dll \u548C sqlite3.exe \u6587\u4EF6\u3002</li><li>\u6DFB\u52A0\u5B89\u88C5\u8DEF\u5F84\u5230PATH\u73AF\u5883\u53D8\u91CF\uFF0C\u6700\u540E\u5728\u547D\u4EE4\u884C\u4E2D\uFF0C\u4F7F\u7528<code>sqlite3</code>\u547D\u4EE4\uFF0C\u5373\u53EF\u8FDB\u5165sqlite3\u547D\u4EE4\u6A21\u5F0F</li></ul><h2 id="\u5B8C\u6574\u8BED\u6CD5" tabindex="-1">\u5B8C\u6574\u8BED\u6CD5 <a class="header-anchor" href="#\u5B8C\u6574\u8BED\u6CD5" aria-hidden="true">#</a></h2><p>\u5B8C\u6574\u8BED\u6CD5\u5B66\u4E60\u8BF7\u770B\u83DC\u9E1F\u6559\u7A0B<a href="https://www.runoob.com/sqlite/sqlite-tutorial.html" target="_blank" rel="noopener noreferrer">Sqlite\u6559\u7A0B</a></p><p>\u672C\u7B14\u8BB0\u53EA\u8BB0\u5F55\u4E00\u4E9B\u5E38\u7528\u7684\u8BED\u6CD5</p><h2 id="\u521B\u5EFA\u6216\u4F7F\u7528\u6570\u636E\u5E93" tabindex="-1">\u521B\u5EFA\u6216\u4F7F\u7528\u6570\u636E\u5E93 <a class="header-anchor" href="#\u521B\u5EFA\u6216\u4F7F\u7528\u6570\u636E\u5E93" aria-hidden="true">#</a></h2><p>\u672A\u8FDB\u5165sqlite3\u547D\u4EE4\u6A21\u5F0F\u4E0B\uFF0C\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\uFF0C\u6253\u5F00\u6570\u636E\u5E93\uFF0C\u4E0D\u5B58\u5728\u5219\u521B\u5EFA\u5E76\u6253\u5F00</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">sqlite3 DatabaseName.db</span></span>\n<span class="line"></span></code></pre></div><p>\u8FDB\u5165sqlite3\u547D\u4EE4\u6A21\u5F0F\u4E0B\uFF0C\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\uFF0C\u6253\u5F00\u6570\u636E\u5E93\uFF0C\u4E0D\u5B58\u5728\u5219\u521B\u5EFA\u5E76\u6253\u5F00</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">.open test.db</span></span>\n<span class="line"></span></code></pre></div><p>\u67E5\u770B\u6240\u6709\u6570\u636E\u5E93\u5217\u8868</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">.databases</span></span>\n<span class="line"></span></code></pre></div><h2 id="\u9000\u51FAsqlite\u547D\u4EE4\u6A21\u5F0F" tabindex="-1">\u9000\u51FAsqlite\u547D\u4EE4\u6A21\u5F0F <a class="header-anchor" href="#\u9000\u51FAsqlite\u547D\u4EE4\u6A21\u5F0F" aria-hidden="true">#</a></h2><p>\u4EE5\u4E0B\u4E09\u4E2A\u547D\u4EE4\u90FD\u53EF\u4EE5</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">.exit	</span></span>\n<span class="line"><span style="color:#A6ACCD;">.quit	</span></span>\n<span class="line"><span style="color:#A6ACCD;">ctrl+c</span></span>\n<span class="line"></span></code></pre></div><h2 id="\u521B\u5EFA\u8868" tabindex="-1">\u521B\u5EFA\u8868 <a class="header-anchor" href="#\u521B\u5EFA\u8868" aria-hidden="true">#</a></h2><p>SQLite \u7684 <code>CREATE TABLE</code> \u8BED\u53E5\u7528\u4E8E\u5728\u4EFB\u4F55\u7ED9\u5B9A\u7684\u6570\u636E\u5E93\u521B\u5EFA\u4E00\u4E2A\u65B0\u8868\u3002\u521B\u5EFA\u57FA\u672C\u8868\uFF0C\u6D89\u53CA\u5230\u547D\u540D\u8868\u3001\u5B9A\u4E49\u5217\u53CA\u6BCF\u4E00\u5217\u7684\u6570\u636E\u7C7B\u578B</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">CREATE TABLE database_name.table_name</span><span style="color:#89DDFF;">(</span></span>\n<span class="line"><span style="color:#A6ACCD;">   column1 datatype  PRIMARY KEY</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">one or more columns</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">,</span></span>\n<span class="line"><span style="color:#A6ACCD;">   column2 datatype,</span></span>\n<span class="line"><span style="color:#A6ACCD;">   column3 datatype,</span></span>\n<span class="line"><span style="color:#A6ACCD;">   .....</span></span>\n<span class="line"><span style="color:#A6ACCD;">   columnN datatype,</span></span>\n<span class="line"><span style="color:#89DDFF;">);</span></span>\n<span class="line"></span></code></pre></div><p>\u793A\u4F8B</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">CREATE TABLE test1</span><span style="color:#89DDFF;">(</span></span>\n<span class="line"><span style="color:#A6ACCD;">   KEY  CHAR</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">100</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">     NOT NULL,</span></span>\n<span class="line"><span style="color:#A6ACCD;">   VALUE   CHAR</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">100</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">   NOT NULL,</span></span>\n<span class="line"><span style="color:#89DDFF;">);</span></span>\n<span class="line"></span></code></pre></div><h2 id="char\u548Cvarchar\u533A\u522B" tabindex="-1">CHAR\u548CVARCHAR\u533A\u522B <a class="header-anchor" href="#char\u548Cvarchar\u533A\u522B" aria-hidden="true">#</a></h2><p>char\u5176\u5B9E\u5C31\u662Fcharacter\uFF0C\u548Cvarchar\u7684\u533A\u522B\u5728\u4E8E\uFF1A</p><ol><li>\u6700\u5927\u957F\u5EA6\u4E0D\u540C\uFF0Cchar\u6700\u5927254bytes\uFF0C\u800Cvarchar\u6700\u592732672bytes</li><li>char\u7684\u5B58\u53D6\u901F\u5EA6\u8981\u6BD4varchar\u5FEB\u5F97\u591A\uFF0C\u56E0\u4E3A\u5176\u957F\u5EA6\u56FA\u5B9A\uFF0C\u65B9\u4FBF\u7A0B\u5E8F\u7684\u5B58\u50A8\u4E0E\u67E5\u627E\uFF1B\u4F46\u662Fchar\u4E3A\u6B64\u4ED8\u51FA\u7684\u662F\u7A7A\u95F4\u7684\u4EE3\u4EF7\uFF0C\u56E0\u4E3A\u5176\u957F\u5EA6\u56FA\u5B9A\uFF0C\u6240\u4EE5\u96BE\u514D\u4F1A\u6709\u591A\u4F59\u7684\u7A7A\u683C\u5360\u4F4D\u7B26\u5360\u636E\u7A7A\u95F4\uFF0C\u53EF\u4EE5\u8BF4\u662F\u4EE5\u7A7A\u95F4\u6362\u53D6\u65F6\u95F4\u6548\u7387\uFF0C\u800Cvarchar\u5219\u662F\u4EE5\u7A7A\u95F4\u6548\u7387\u4E3A\u9996\u4F4D\u7684</li><li>char\u7684\u5B58\u50A8\u65B9\u5F0F\u662F\uFF0C\u4E00\u4E2A\u82F1\u6587\u5B57\u7B26\uFF08ASCII\uFF09\u5360\u75281\u4E2A\u5B57\u8282\uFF0C\u4E00\u4E2A\u6C49\u5B57\u5360\u7528\u4E24\u4E2A\u5B57\u8282\uFF1B\u800Cvarchar\u7684\u5B58\u50A8\u65B9\u5F0F\u662F\uFF0C\u4E00\u4E2A\u82F1\u6587\u5B57\u7B26\u5360\u75282\u4E2A\u5B57\u8282\uFF0C\u4E00\u4E2A\u6C49\u5B57\u4E5F\u5360\u75282\u4E2A\u5B57\u8282</li><li>char\u7684\u957F\u5EA6\u662F\u4E0D\u53EF\u53D8\u7684\uFF0C\u800Cvarchar\u7684\u957F\u5EA6\u662F\u53EF\u53D8\u7684\uFF0Cchar(n)\u5728\u6570\u636E\u5E93\u5360\u7528n\u4E2A\u5B57\u8282\uFF0C\u5728\u6570\u636E\u5E93\u4E2D\u4EE5\u7A7A\u683C\u8865\u8DB3\uFF0C\u53D6\u51FA\u6765\u65F6\u672B\u5C3E\u7684\u7A7A\u683C\u5C06\u88AB\u53BB\u6389\uFF0Cvarchar(n)\u5728\u6570\u636E\u5E93\u4E2D\u81F3\u5C11\u5360\u75281\u4E2A\u5B57\u8282\uFF0C\u5728\u6570\u636E\u5E93\u4E2D\u672B\u5C3E\u7684\u7A7A\u683C\u5C06\u81EA\u52A8\u53BB\u6389\uFF0C\u5B9E\u9645\u5360\u7528\u5F55\u5165\u6570\u636E\u957F\u5EA6 \uFF0B1 \u6216\u8005 +2 \u5B57\u8282</li></ol><h2 id="\u5217\u51FA\u6570\u636E\u5E93\u4E2D\u6240\u6709\u8868" tabindex="-1">\u5217\u51FA\u6570\u636E\u5E93\u4E2D\u6240\u6709\u8868 <a class="header-anchor" href="#\u5217\u51FA\u6570\u636E\u5E93\u4E2D\u6240\u6709\u8868" aria-hidden="true">#</a></h2><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">.tables</span></span>\n<span class="line"></span></code></pre></div><h2 id="\u5220\u9664\u8868" tabindex="-1">\u5220\u9664\u8868 <a class="header-anchor" href="#\u5220\u9664\u8868" aria-hidden="true">#</a></h2><p>SQLite \u7684 <strong>DROP TABLE</strong> \u8BED\u53E5\u7528\u6765\u5220\u9664\u8868\u5B9A\u4E49\u53CA\u5176\u6240\u6709\u76F8\u5173\u6570\u636E\u3001\u7D22\u5F15\u3001\u89E6\u53D1\u5668\u3001\u7EA6\u675F\u548C\u8BE5\u8868\u7684\u6743\u9650\u89C4\u8303</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">DROP TABLE database_name.table_name</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"></span></code></pre></div><h2 id="\u63D2\u5165\u6570\u636E\u5230\u8868\u4E2D" tabindex="-1">\u63D2\u5165\u6570\u636E\u5230\u8868\u4E2D <a class="header-anchor" href="#\u63D2\u5165\u6570\u636E\u5230\u8868\u4E2D" aria-hidden="true">#</a></h2><p>SQLite \u7684 <strong>INSERT INTO</strong> \u8BED\u53E5\u7528\u4E8E\u5411\u6570\u636E\u5E93\u7684\u67D0\u4E2A\u8868\u4E2D\u6DFB\u52A0\u65B0\u7684\u6570\u636E\u884C</p><p>column1, column2, ...columnN \u662F\u8981\u63D2\u5165\u6570\u636E\u7684\u8868\u4E2D\u7684\u5217\u7684\u540D\u79F0</p><p>value1, value2, ...valueN\u662F\u8981\u63D2\u5165\u6570\u636E\u7684\u8868\u4E2D\u7684\u5217\u7684\u6570\u636E</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">INSERT INTO TABLE_NAME </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">column1, column2,...columnN</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">  </span></span>\n<span class="line"><span style="color:#A6ACCD;">VALUES </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">value1, value2,...valueN</span><span style="color:#89DDFF;">);</span></span>\n<span class="line"></span></code></pre></div><p>\u5982\u4E3A\u8868\u4E2D\u7684\u6240\u6709\u5217\u6DFB\u52A0\u503C\uFF0C\u53EF\u4EE5\u4E0D\u6307\u5B9A\u5217\u540D\u79F0\uFF0C\u4F46\u8981\u786E\u4FDD\u503C\u7684\u987A\u5E8F\u4E0E\u5217\u5728\u8868\u4E2D\u7684\u987A\u5E8F\u4E00\u81F4</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">INSERT INTO TABLE_NAME VALUES </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">value1,value2,value3,...valueN</span><span style="color:#89DDFF;">);</span></span>\n<span class="line"></span></code></pre></div><h2 id="\u5224\u65AD\u6570\u636E\u5E93\u662F\u5426\u6253\u5F00" tabindex="-1">\u5224\u65AD\u6570\u636E\u5E93\u662F\u5426\u6253\u5F00 <a class="header-anchor" href="#\u5224\u65AD\u6570\u636E\u5E93\u662F\u5426\u6253\u5F00" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> isOpenDatabase </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isOpenDatabase</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">first</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">_doc/test.db</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>\n<span class="line"></span></code></pre></div><h2 id="\u5173\u95ED\u6570\u636E\u5E93" tabindex="-1">\u5173\u95ED\u6570\u636E\u5E93 <a class="header-anchor" href="#\u5173\u95ED\u6570\u636E\u5E93" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">closeDatabase</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">first</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#82AAFF;">success</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u5173\u95ED\u6570\u636E\u5E93\u6210\u529F</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#82AAFF;">fail</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u5173\u95ED\u6570\u636E\u5E93\u5931\u8D25</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>\n<span class="line"></span></code></pre></div><h2 id="sqlite-js" tabindex="-1">sqlite.js <a class="header-anchor" href="#sqlite-js" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">dbName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">check</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// \u6570\u636E\u5E93\u540D\u79F0</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">dbPath</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">_doc/check.db</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// \u6570\u636E\u5E93\u5730\u5740</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u5224\u65AD\u6570\u636E\u5E93\u662F\u5426\u6253\u5F00,\u6253\u5F00\u8FD4\u56DEtrue, \u5173\u95ED\u8FD4\u56DE false</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">isOpen</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isOpenDatabase</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbName</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// \u6570\u636E\u5E93\u540D\u79F0</span></span>\n<span class="line"><span style="color:#F07178;">        path</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbPath</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// \u6570\u636E\u5E93\u5730\u5740</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u521B\u5EFA\u6216\u6253\u5F00\u6570\u636E\u5E93</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">openSqlite</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">openDatabase</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbName</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">          path</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbPath</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">          success</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#F07178;">          fail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u5173\u95ED\u6570\u636E\u5E93</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">closeSqlite</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">closeDatabase</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbName</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">          success</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#F07178;">          fail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u6570\u636E\u5E93\u5EFA\u8868 sql:&#39;CREATE TABLE IF NOT EXISTS dbTable(&quot;id&quot; varchar(50),&quot;name&quot; TEXT) </span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u521B\u5EFA CREATE TABLE IF NOT EXISTS \u3001 dbTable \u662F\u8868\u540D\uFF0C\u4E0D\u80FD\u7528\u6570\u5B57\u5F00\u5934\u3001\u62EC\u53F7\u91CC\u662F\u8868\u683C\u7684\u8868\u5934</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">createTable</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// executeSql: \u6267\u884C\u589E\u5220\u6539\u7B49\u64CD\u4F5C\u7684SQL\u8BED\u53E5</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">executeSql</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbName</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">          sql</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">CREATE TABLE IF NOT EXISTS </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">(</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">)</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">          success</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#F07178;">          fail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u6570\u636E\u5E93\u5220\u8868 sql:&#39;DROP TABLE dbTable&#39;</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">dropTable</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">executeSql</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbName</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">          sql</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">DROP TABLE </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}`</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">          success</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#F07178;">          fail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u5411\u8868\u683C\u91CC\u6DFB\u52A0\u6570\u636E sql:&#39;INSERT INTO dbTable VALUES(&#39;x&#39;,&#39;x&#39;,&#39;x&#39;)&#39;   \u5BF9\u5E94\u65B0\u589E</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u6216\u8005 sql:&#39;INSERT INTO dbTable (&#39;x&#39;,&#39;x&#39;,&#39;x&#39;) VALUES(&#39;x&#39;,&#39;x&#39;,&#39;x&#39;)&#39;   \u5177\u4F53\u65B0\u589E</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u63D2\u5165 INSERT INTO  \u3001 dbTable \u662F\u8868\u540D\u3001\u6839\u636E\u8868\u5934\u5217\u540D\u63D2\u5165\u5217\u503C</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">insertTableData</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> condition</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// \u5224\u65AD\u6709\u6CA1\u6709\u4F20\u53C2</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// \u5224\u65AD\u4F20\u7684\u53C2\u662F\u5426\u6709\u503C</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">bol</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">condition</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">INSERT INTO </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> VALUES(&#39;</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&#39;)</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">INSERT INTO </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> (</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">condition</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">) VALUES(</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">)</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// console.log(sql);</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// \u8868\u683C\u6DFB\u52A0\u6570\u636E</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">executeSql</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">              name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbName</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">              sql</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">              success</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">                </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">              </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#F07178;">              fail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">                </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">              </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u9519\u8BEF\u6DFB\u52A0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u9519\u8BEF\u6DFB\u52A0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u6839\u636E\u6761\u4EF6\u5411\u8868\u683C\u91CC\u6DFB\u52A0\u6570\u636E  \u6709\u6570\u636E\u66F4\u65B0\u3001\u65E0\u6570\u636E\u63D2\u5165</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// (\u5EFA\u8868\u65F6\u9700\u8981\u8BBE\u7F6E\u4E3B\u952E) \u4F8B\u5982 --- &quot;roomid&quot; varchar(50) PRIMARY KEY</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">insertOrReplaceData</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> condition</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// \u5224\u65AD\u6709\u6CA1\u6709\u4F20\u53C2</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">condition</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">INSERT OR REPLACE INTO </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> VALUES(&#39;</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&#39;)</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">INSERT OR REPLACE INTO </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> (</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">condition</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">) VALUES(</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">)</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// console.log(sql);</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// \u8868\u683C\u6DFB\u52A0\u6570\u636E</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">executeSql</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbName</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">            sql</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">            success</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">              </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#F07178;">            fail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">              </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u9519\u8BEF\u6DFB\u52A0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u67E5\u8BE2\u83B7\u53D6\u6570\u636E\u5E93\u91CC\u7684\u6570\u636E sql:&#39;SELECT * FROM dbTable WHERE lname = &#39;lvalue&#39;&#39;</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u67E5\u8BE2 SELECT * FROM \u3001 dbTable \u662F\u8868\u540D\u3001 WHERE \u67E5\u627E\u6761\u4EF6 lname,lvalue \u662F\u67E5\u8BE2\u6761\u4EF6\u7684\u5217\u540D\u548C\u5217\u503C</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">selectTableData</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> lname</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> lvalue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> cc</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> dd</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// \u7B2C\u4E00\u4E2A\u662F\u8868\u5355\u540D\u79F0\uFF0C\u540E\u4E24\u4E2A\u53C2\u6570\u662F\u5217\u8868\u540D\uFF0C\u7528\u6765\u68C0\u7D22</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">lname</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cc</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// \u4E24\u4E2A\u68C0\u7D22\u6761\u4EF6</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">SELECT * FROM </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> WHERE </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">lname</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> = &#39;</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">lvalue</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&#39; AND </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">cc</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> = &#39;</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dd</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">lname</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cc</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// \u4E00\u4E2A\u68C0\u7D22\u6761\u4EF6</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">SELECT * FROM </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> WHERE </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">lname</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> = &#39;</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">lvalue</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// console.log(sql);</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">lname</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">SELECT * FROM </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// \u8868\u683C\u67E5\u8BE2\u6570\u636E  \u6267\u884C\u67E5\u8BE2\u7684SQL\u8BED\u53E5</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">selectSql</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbName</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">            sql</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">            success</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">              </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#F07178;">            fail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">              </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u9519\u8BEF\u67E5\u8BE2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u5220\u9664\u8868\u91CC\u7684\u6570\u636E sql:&#39;DELETE FROM dbTable WHERE lname = &#39;lvalue&#39;&#39;</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u5220\u9664 DELETE FROM \u3001 dbTable \u662F\u8868\u540D\u3001 WHERE \u67E5\u627E\u6761\u4EF6 lname,lvalue \u662F\u67E5\u8BE2\u6761\u4EF6\u7684\u5217\u540D\u548C\u5217\u503C</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">deleteTableData</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> lname</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> lvalue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ww</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ee</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">lname</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">DELETE FROM </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">ww</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// \u4E24\u4E2A\u68C0\u7D22\u6761\u4EF6</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">DELETE FROM </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> WHERE </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">lname</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> = &#39;</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">lvalue</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&#39; AND </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">ww</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> = &#39;</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">ee</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// \u4E00\u4E2A\u68C0\u7D22\u6761\u4EF6</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">DELETE FROM </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> WHERE </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">lname</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> = &#39;</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">lvalue</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// \u5220\u9664\u8868\u6570\u636E</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">executeSql</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbName</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">            sql</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">            success</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">              </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#F07178;">            fail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">              </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u9519\u8BEF\u5220\u9664</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u4FEE\u6539\u6570\u636E\u8868\u91CC\u7684\u6570\u636E sql:&quot;UPDATE dbTable SET \u5217\u540D = &#39;\u5217\u503C&#39;,\u5217\u540D = &#39;\u5217\u503C&#39; WHERE lname = &#39;lvalue&#39;&quot;</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u4FEE\u6539 UPDATE \u3001 dbTable \u662F\u8868\u540D, data: \u8981\u4FEE\u6539\u7684\u5217\u540D=\u4FEE\u6539\u540E\u5217\u503C, lname,lvalue \u662F\u67E5\u8BE2\u6761\u4EF6\u7684\u5217\u540D\u548C\u5217\u503C</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">updateTableData</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> lname</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> lvalue</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">lname</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">UPDATE </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> SET </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">}`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">UPDATE </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> SET </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> WHERE </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">lname</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> = &#39;</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">lvalue</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// WHERE \u524D\u9762\u662F\u8981\u4FEE\u6539\u7684\u5217\u540D\u3001\u5217\u503C\uFF0C\u540E\u9762\u662F\u6761\u4EF6\u7684\u5217\u540D\u3001\u5217\u503C</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// \u4FEE\u6539\u8868\u6570\u636E</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">executeSql</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbName</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">          sql</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">          success</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#F07178;">          fail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// sql:&quot;SELECT * FROM dbTable ORDER BY &#39;id&#39; DESC LIMIT 15 OFFSET &#39;num&#39;&quot;</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// dbTable \u8868\u540D, ORDER BY \u4EE3\u8868\u6392\u5E8F\u9ED8\u8BA4\u6B63\u5E8F, id \u662F\u6392\u5E8F\u7684\u6761\u4EF6 DESC \u4EE3\u8868\u5012\u5E8F\uFF0C\u4ECE\u6700\u540E\u4E00\u6761\u6570\u636E\u5F00\u59CB\u62FF</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// LIMIT 15 OFFSET &#39;${num}&#39;,\u8FD9\u53E5\u7684\u610F\u601D\u662F\u8DF3\u8FC7 num \u6761\u62FF 15 \u6761\u6570\u636E, num \u4E3A\u8DF3\u8FC7\u591A\u5C11\u6761\u6570\u636E\u662F\u52A8\u6001\u503C</span></span>\n<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u4F8B \u521D\u59CBnum\u8BBE\u4E3A0\uFF0C\u5C31\u4ECE\u6700\u540E\u7684\u6570\u636E\u5F00\u59CB\u62FF15\u6761\uFF0C\u4E0B\u6B21\u4E0D\u62FF\u521A\u83B7\u53D6\u7684\u6570\u636E\uFF0C\u6240\u4EE5\u53EF\u4EE5\u8BA9num\u4E3A15\uFF0C\u8FD9\u6837\u5C31\u80FD\u4E00\u6B65\u4E00\u6B65\u7684\u62FF\u5B8C\u6240\u6709\u7684\u6570\u636E</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">pullSQL</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> id</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> num</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">plus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sqlite</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">selectSql</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">          name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dbName</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">          sql</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">SELECT * FROM </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbTable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> ORDER BY &#39;</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&#39; DESC LIMIT 15 OFFSET &#39;</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">,</span></span>\n<span class="line"><span style="color:#F07178;">          success</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">},</span></span>\n<span class="line"><span style="color:#F07178;">          fail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>\n<span class="line"></span></code></pre></div>', 47);
const _hoisted_48 = [
  _hoisted_1
];
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", null, _hoisted_48);
}
var _6_sqlite = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export { __pageData, _6_sqlite as default };
