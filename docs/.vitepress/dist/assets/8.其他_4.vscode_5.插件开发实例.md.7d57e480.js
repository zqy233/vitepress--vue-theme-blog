import{_ as s,c as n,o as a,a as l}from"./app.a9997904.js";const u=JSON.parse('{"title":"插件开发实例","description":"","frontmatter":{},"headers":[{"level":2,"title":"获取光标位置","slug":"获取光标位置","link":"#获取光标位置","children":[]},{"level":2,"title":"获取光标左侧文本","slug":"获取光标左侧文本","link":"#获取光标左侧文本","children":[]},{"level":2,"title":"在光标位置后面插入文本","slug":"在光标位置后面插入文本","link":"#在光标位置后面插入文本","children":[]},{"level":2,"title":"更改当前编辑器全部文本","slug":"更改当前编辑器全部文本","link":"#更改当前编辑器全部文本","children":[]},{"level":2,"title":"路径跳转","slug":"路径跳转","link":"#路径跳转","children":[]},{"level":2,"title":"Position","slug":"position","link":"#position","children":[]},{"level":2,"title":"Selection/光标","slug":"selection-光标","link":"#selection-光标","children":[]}],"relativePath":"8.其他/4.vscode/5.插件开发实例.md","lastUpdated":1676276426000}'),o={name:"8.其他/4.vscode/5.插件开发实例.md"},p=l(`<h1 id="插件开发实例" tabindex="-1">插件开发实例 <a class="header-anchor" href="#插件开发实例" aria-hidden="true">#</a></h1><h2 id="获取光标位置" tabindex="-1">获取光标位置 <a class="header-anchor" href="#获取光标位置" aria-hidden="true">#</a></h2><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">editor</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">activeTextEditor</span></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">editor</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">// 不一定有编辑器打开，所以需要判断一下</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">cursorPosition</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">editor</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">selection</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">editor</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">window</span><span style="color:#B392F0;">.activeTextEditor</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (</span><span style="color:#F97583;">!</span><span style="color:#B392F0;">editor) </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// 不一定有编辑器打开，所以需要判断一下</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">cursorPosition</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">editor</span><span style="color:#B392F0;">.selection</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="获取光标左侧文本" tabindex="-1">获取光标左侧文本 <a class="header-anchor" href="#获取光标左侧文本" aria-hidden="true">#</a></h2><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">lineText</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">editor</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">lineAt</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">cursorPosition</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">start</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">line</span><span style="color:#ABB2BF;">).</span><span style="color:#E06C75;">text</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">lineTextList</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">lineText</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">trim</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot; &quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">lastWordBeforeCursor</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">lineTextList</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">lineTextList</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">lineText</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">editor</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">document</span><span style="color:#B392F0;">.lineAt(</span><span style="color:#79B8FF;">cursorPosition</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">start</span><span style="color:#B392F0;">.line).text</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">lineTextList</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">lineText</span><span style="color:#B392F0;">.trim().split(</span><span style="color:#FFAB70;">&quot; &quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">lastWordBeforeCursor</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> lineTextList[</span><span style="color:#79B8FF;">lineTextList</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">length</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">-</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#B392F0;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="在光标位置后面插入文本" tabindex="-1">在光标位置后面插入文本 <a class="header-anchor" href="#在光标位置后面插入文本" aria-hidden="true">#</a></h2><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">editor</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">edit</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">editBuilder</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#E5C07B;">editBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">editor</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">lineAt</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">cursorPosition</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">active</span><span style="color:#ABB2BF;">).</span><span style="color:#E5C07B;">range</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">end</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;: ;&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#79B8FF;">editor</span><span style="color:#B392F0;">.edit(editBuilder </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">   </span><span style="color:#79B8FF;">editBuilder</span><span style="color:#B392F0;">.insert(</span><span style="color:#79B8FF;">editor</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">document</span><span style="color:#B392F0;">.lineAt(</span><span style="color:#79B8FF;">cursorPosition</span><span style="color:#B392F0;">.active).</span><span style="color:#79B8FF;">range</span><span style="color:#B392F0;">.end</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;: ;&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="更改当前编辑器全部文本" tabindex="-1">更改当前编辑器全部文本 <a class="header-anchor" href="#更改当前编辑器全部文本" aria-hidden="true">#</a></h2><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">editorBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Range</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Position</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">), </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Position</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">activeDocument</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">lineCount</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#E06C75;">Str</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#79B8FF;">editorBuilder</span><span style="color:#B392F0;">.replace(</span></span>
<span class="line"><span style="color:#B392F0;">   </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Range(</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Position(</span><span style="color:#F8F8F8;">0</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">)</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Position(</span><span style="color:#79B8FF;">activeDocument</span><span style="color:#B392F0;">.lineCount </span><span style="color:#F97583;">+</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">))</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">   Str</span></span>
<span class="line"><span style="color:#B392F0;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="路径跳转" tabindex="-1">路径跳转 <a class="header-anchor" href="#路径跳转" aria-hidden="true">#</a></h2><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">window</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">TextDocument</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">Position</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">Location</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">Uri</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">languages</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ExtensionContext</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vscode&quot;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">dirname</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;path&quot;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">existsSync</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;fs&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// vscode路径跳转插件的机制是：</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 1.使用languages.registerDefinitionProvider定义一个Provider（处理路径的函数）</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 2.当按住Ctrl键时，如果该函数return了一个location，字符串就会变成一个可以点击的链接，vscode就会跳转该路径</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#7F848E;font-style:italic;"> </span><span style="color:#E5C07B;font-style:italic;">{*}</span><span style="color:#7F848E;font-style:italic;"> </span><span style="color:#E06C75;font-style:italic;">document</span><span style="color:#7F848E;font-style:italic;"> 当前打开的编辑器</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#7F848E;font-style:italic;"> </span><span style="color:#E5C07B;font-style:italic;">{*}</span><span style="color:#7F848E;font-style:italic;"> </span><span style="color:#E06C75;font-style:italic;">position</span><span style="color:#7F848E;font-style:italic;"> 光标所在位置</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">provideDefinition</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">document</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">TextDocument</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">position</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Position</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fileName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">fileName</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// console.log(&quot; 当前文件完整路径&quot;, fileName)</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">workDir</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">dirname</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">fileName</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// console.log(&quot; 当前文件所在目录&quot;, workDir)</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">word</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getText</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getWordRangeAtPosition</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">position</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// console.log(&quot; 当前光标所在单词&quot;, word)</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">line</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">lineAt</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">position</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// console.log(&quot;当前光标所在行&quot;, line)</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">/package</span><span style="color:#56B6C2;">\\.</span><span style="color:#E06C75;">json</span><span style="color:#C678DD;">$</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">fileName</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">jumpPath</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">workDir</span><span style="color:#C678DD;">}</span><span style="color:#56B6C2;">\\\\</span><span style="color:#98C379;">node_modules</span><span style="color:#56B6C2;">\\\\</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">word</span></span>
<span class="line"><span style="color:#ABB2BF;">      .</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/&quot;/</span><span style="color:#C678DD;">g</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">      .</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/</span><span style="color:#56B6C2;">\\/</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">g</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;">\\\\</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#56B6C2;">\\\\</span><span style="color:#98C379;">package.json\`</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// console.log(&quot;node_modules路径&quot;, destPath)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// console.log(&quot;是否存在该包&quot;, existsSync(destPath))</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">existsSync</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">jumpPath</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// new Position(0, 0) 表示位置为第一行第一列</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Location</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">file</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">jumpPath</span><span style="color:#ABB2BF;">), </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Position</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">showInformationMessage</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;info!&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * json文件中触发路径跳转插件</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#7F848E;font-style:italic;"> </span><span style="color:#E06C75;font-style:italic;">context</span><span style="color:#7F848E;font-style:italic;"> vscode扩展上下文</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">activate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">context</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">ExtensionContext</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">context</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">subscriptions</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">languages</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">registerDefinitionProvider</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&quot;json&quot;</span><span style="color:#ABB2BF;">], {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">provideDefinition</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">  )</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { window</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> TextDocument</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> Position</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> Location</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> Uri</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> languages</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ExtensionContext } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vscode&quot;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { dirname } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;path&quot;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { existsSync } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;fs&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// vscode路径跳转插件的机制是：</span></span>
<span class="line"><span style="color:#6B737C;">// 1.使用languages.registerDefinitionProvider定义一个Provider（处理路径的函数）</span></span>
<span class="line"><span style="color:#6B737C;">// 2.当按住Ctrl键时，如果该函数return了一个location，字符串就会变成一个可以点击的链接，vscode就会跳转该路径</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">/**</span></span>
<span class="line"><span style="color:#6B737C;"> * </span><span style="color:#F97583;">@param</span><span style="color:#6B737C;"> </span><span style="color:#B392F0;">{*}</span><span style="color:#6B737C;"> document 当前打开的编辑器</span></span>
<span class="line"><span style="color:#6B737C;"> * </span><span style="color:#F97583;">@param</span><span style="color:#6B737C;"> </span><span style="color:#B392F0;">{*}</span><span style="color:#6B737C;"> position 光标所在位置</span></span>
<span class="line"><span style="color:#6B737C;"> */</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> provideDefinition(document</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> TextDocument</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> position</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> Position) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">fileName</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">document</span><span style="color:#B392F0;">.fileName</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// console.log(&quot; 当前文件完整路径&quot;, fileName)</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">workDir</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> dirname(fileName)</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// console.log(&quot; 当前文件所在目录&quot;, workDir)</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">word</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">document</span><span style="color:#B392F0;">.getText(</span><span style="color:#79B8FF;">document</span><span style="color:#B392F0;">.getWordRangeAtPosition(position))</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// console.log(&quot; 当前光标所在单词&quot;, word)</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">line</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">document</span><span style="color:#B392F0;">.lineAt(position)</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// console.log(&quot;当前光标所在行&quot;, line)</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (</span><span style="color:#FFAB70;">/package\\.json</span><span style="color:#F97583;">$</span><span style="color:#FFAB70;">/</span><span style="color:#B392F0;">.test(fileName)) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">let</span><span style="color:#B392F0;"> jumpPath </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">workDir</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">\\\\node_modules\\\\</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">word</span></span>
<span class="line"><span style="color:#B392F0;">      .replace(</span><span style="color:#FFAB70;">/&quot;/</span><span style="color:#F97583;">g</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">      .replace(</span><span style="color:#FFAB70;">/\\//</span><span style="color:#F97583;">g</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;\\\\&quot;</span><span style="color:#B392F0;">)</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">\\\\package.json\`</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// console.log(&quot;node_modules路径&quot;, destPath)</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// console.log(&quot;是否存在该包&quot;, existsSync(destPath))</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (existsSync(jumpPath)) {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#6B737C;">// new Position(0, 0) 表示位置为第一行第一列</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Location(</span><span style="color:#79B8FF;">Uri</span><span style="color:#B392F0;">.file(jumpPath)</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Position(</span><span style="color:#F8F8F8;">0</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">))</span></span>
<span class="line"><span style="color:#B392F0;">    } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">window</span><span style="color:#B392F0;">.showInformationMessage(</span><span style="color:#FFAB70;">&quot;info!&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">/**</span></span>
<span class="line"><span style="color:#6B737C;"> * json文件中触发路径跳转插件</span></span>
<span class="line"><span style="color:#6B737C;"> * </span><span style="color:#F97583;">@param</span><span style="color:#6B737C;"> context vscode扩展上下文</span></span>
<span class="line"><span style="color:#6B737C;"> */</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> activate(context</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ExtensionContext) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">context</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">subscriptions</span><span style="color:#B392F0;">.push(</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">languages</span><span style="color:#B392F0;">.registerDefinitionProvider([</span><span style="color:#FFAB70;">&quot;json&quot;</span><span style="color:#B392F0;">]</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      provideDefinition</span></span>
<span class="line"><span style="color:#B392F0;">    })</span></span>
<span class="line"><span style="color:#B392F0;">  )</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h2 id="position" tabindex="-1">Position <a class="header-anchor" href="#position" aria-hidden="true">#</a></h2><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Position</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">line</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">character</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">): </span><span style="color:#E06C75;">Position</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Position(line: number</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> character: number): Position</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>根据行号和字符，创建一个Position位置对象</p><h2 id="selection-光标" tabindex="-1">Selection/光标 <a class="header-anchor" href="#selection-光标" aria-hidden="true">#</a></h2><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Selection</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">anchor</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Position</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">active</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Position</span><span style="color:#ABB2BF;">): </span><span style="color:#E06C75;">Selection</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Selection</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">anchorLine</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">anchorCharacter</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">activeLine</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">activeCharacter</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">): </span><span style="color:#E06C75;">Selection</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Selection(anchor: Position</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> active: Position): Selection </span></span>
<span class="line"><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Selection(anchorLine: number</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> anchorCharacter: number</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> activeLine: number</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> activeCharacter: number): Selection</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://code.visualstudio.com/api/references/vscode-api#Selection" target="_blank" rel="noreferrer">https://code.visualstudio.com/api/references/vscode-api#Selection</a></p></blockquote><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">&lt;image v-for=&quot;item in imgList&quot; :key=&quot;item.id&quot; :src=&quot;item.imageUrl&quot; mode=&quot;aspectFill&quot;&gt;&lt;/image&gt;</span></span>
<span class="line"><span style="color:#abb2bf;">        &lt;image src=&quot;../../static/img/recommend1.jpeg&quot; mode=&quot;heightFix&quot; /&gt;</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#b392f0;">&lt;image v-for=&quot;item in imgList&quot; :key=&quot;item.id&quot; :src=&quot;item.imageUrl&quot; mode=&quot;aspectFill&quot;&gt;&lt;/image&gt;</span></span>
<span class="line"><span style="color:#b392f0;">        &lt;image src=&quot;../../static/img/recommend1.jpeg&quot; mode=&quot;heightFix&quot; /&gt;</span></span>
<span class="line"><span style="color:#b392f0;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,18),e=[p];function t(c,r,B,y,i,F){return a(),n("div",null,e)}const A=s(o,[["render",t]]);export{u as __pageData,A as default};
