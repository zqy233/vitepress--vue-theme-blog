import{_ as s,o as n,c as a,a as l}from"./app.bfa9bd4b.js";const b=JSON.parse('{"title":"sqlite","description":"","frontmatter":{},"headers":[{"level":2,"title":"uniapp 中安装","slug":"uniapp-中安装","link":"#uniapp-中安装","children":[]},{"level":2,"title":"本地电脑安装","slug":"本地电脑安装","link":"#本地电脑安装","children":[]},{"level":2,"title":"完整语法","slug":"完整语法","link":"#完整语法","children":[]},{"level":2,"title":"创建或使用数据库","slug":"创建或使用数据库","link":"#创建或使用数据库","children":[]},{"level":2,"title":"退出 sqlite 命令模式","slug":"退出-sqlite-命令模式","link":"#退出-sqlite-命令模式","children":[]},{"level":2,"title":"创建表","slug":"创建表","link":"#创建表","children":[]},{"level":2,"title":"CHAR 和 VARCHAR 区别","slug":"char-和-varchar-区别","link":"#char-和-varchar-区别","children":[]},{"level":2,"title":"列出数据库中所有表","slug":"列出数据库中所有表","link":"#列出数据库中所有表","children":[]},{"level":2,"title":"删除表","slug":"删除表","link":"#删除表","children":[]},{"level":2,"title":"插入数据到表中","slug":"插入数据到表中","link":"#插入数据到表中","children":[]},{"level":2,"title":"判断数据库是否打开","slug":"判断数据库是否打开","link":"#判断数据库是否打开","children":[]},{"level":2,"title":"关闭数据库","slug":"关闭数据库","link":"#关闭数据库","children":[]},{"level":2,"title":"sqlite.js","slug":"sqlite-js","link":"#sqlite-js","children":[]}],"relativePath":"3.框架/2.uniapp/sqlite.md","lastUpdated":1720835436694}'),p={name:"3.框架/2.uniapp/sqlite.md"},o=l(`<h1 id="sqlite" tabindex="-1">sqlite <a class="header-anchor" href="#sqlite" aria-hidden="true">#</a></h1><blockquote><p><code>SQLite</code>是一个软件库，实现了自给自足的、无服务器的、零配置的、事务性的 SQL 数据库引擎，是世界上最广泛部署的 SQL 数据库引擎，<code>SQLite</code>源代码不受版权限制</p></blockquote><h2 id="uniapp-中安装" tabindex="-1">uniapp 中安装 <a class="header-anchor" href="#uniapp-中安装" aria-hidden="true">#</a></h2><p>在 uniapp 项目<code>manifest.json</code>的<code>App模块配置</code>中勾选<code>sqlite</code>，HBuilderX 中使用云打包时会在打包中安装<code>sqlite</code></p><blockquote><p>sqlite 可以存储 140TB 的数据量，所以不用担心 sqlite 存储满了，只需关注应用内存，若数据库内容过多，提示用户清理</p></blockquote><h2 id="本地电脑安装" tabindex="-1">本地电脑安装 <a class="header-anchor" href="#本地电脑安装" aria-hidden="true">#</a></h2><p>可以更方便地用于进行一些操作学习</p><ul><li><a href="http://www.sqlite.org/download.html" target="_blank" rel="noreferrer">SQLite 官网下载</a></li><li>根据电脑位数 32 或 64 选择下载第一个或第二个,第三个则是必须的，下载这两个压缩文件</li><li>创建文件夹 sqlite，在此文件夹下解压两个压缩文件，将得到 sqlite3.def、sqlite3.dll 和 sqlite3.exe 文件。</li><li>添加安装路径到 PATH 环境变量，最后在命令行中，使用<code>sqlite3</code>命令，即可进入 sqlite3 命令模式</li></ul><h2 id="完整语法" tabindex="-1">完整语法 <a class="header-anchor" href="#完整语法" aria-hidden="true">#</a></h2><p>完整语法学习请看菜鸟教程<a href="https://www.runoob.com/sqlite/sqlite-tutorial.html" target="_blank" rel="noreferrer">Sqlite 教程</a></p><p>本笔记只记录一些常用的语法</p><h2 id="创建或使用数据库" tabindex="-1">创建或使用数据库 <a class="header-anchor" href="#创建或使用数据库" aria-hidden="true">#</a></h2><p>未进入 sqlite3 命令模式下，使用以下命令，打开数据库，不存在则创建并打开</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">sqlite3</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">DatabaseName.db</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#B392F0;">sqlite3 </span><span style="color:#9DB1C5;">DatabaseName.db</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>进入 sqlite3 命令模式下，使用以下命令，打开数据库，不存在则创建并打开</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">.open</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">test.db</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#B392F0;">.open </span><span style="color:#9DB1C5;">test.db</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>查看所有数据库列表</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">.databases</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#B392F0;">.databases</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="退出-sqlite-命令模式" tabindex="-1">退出 sqlite 命令模式 <a class="header-anchor" href="#退出-sqlite-命令模式" aria-hidden="true">#</a></h2><p>以下三个命令都可以</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">.exit</span></span>
<span class="line"><span style="color:#61AFEF;">.quit</span></span>
<span class="line"><span style="color:#61AFEF;">ctrl+c</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#B392F0;">.exit</span></span>
<span class="line"><span style="color:#B392F0;">.quit</span></span>
<span class="line"><span style="color:#B392F0;">ctrl+c</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="创建表" tabindex="-1">创建表 <a class="header-anchor" href="#创建表" aria-hidden="true">#</a></h2><p>SQLite 的 <code>CREATE TABLE</code> 语句用于在任何给定的数据库创建一个新表。创建基本表，涉及到命名表、定义列及每一列的数据类型</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">CREATE</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">TABLE</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">database_name.table_name</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#61AFEF;">column1</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">datatype</span><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">PRIMARY</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">KEY</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">one</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">or</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">more</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">columns</span><span style="color:#ABB2BF;">)</span><span style="color:#98C379;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#61AFEF;">column2</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">datatype,</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#61AFEF;">column3</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">datatype,</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#56B6C2;">.....</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#61AFEF;">columnN</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">datatype,</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#B392F0;">CREATE </span><span style="color:#9DB1C5;">TABLE</span><span style="color:#B392F0;"> </span><span style="color:#9DB1C5;">database_name.table_name</span><span style="color:#B392F0;">(</span></span>
<span class="line"><span style="color:#B392F0;">   column1 </span><span style="color:#9DB1C5;">datatype</span><span style="color:#B392F0;">  </span><span style="color:#9DB1C5;">PRIMARY</span><span style="color:#B392F0;"> </span><span style="color:#9DB1C5;">KEY</span><span style="color:#B392F0;">(one </span><span style="color:#9DB1C5;">or</span><span style="color:#B392F0;"> </span><span style="color:#9DB1C5;">more</span><span style="color:#B392F0;"> </span><span style="color:#9DB1C5;">columns</span><span style="color:#B392F0;">)</span><span style="color:#9DB1C5;">,</span></span>
<span class="line"><span style="color:#B392F0;">   column2 </span><span style="color:#9DB1C5;">datatype,</span></span>
<span class="line"><span style="color:#B392F0;">   column3 </span><span style="color:#9DB1C5;">datatype,</span></span>
<span class="line"><span style="color:#B392F0;">   .....</span></span>
<span class="line"><span style="color:#B392F0;">   columnN </span><span style="color:#9DB1C5;">datatype,</span></span>
<span class="line"><span style="color:#B392F0;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>示例</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">CREATE</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">TABLE</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">test1</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#61AFEF;">KEY</span><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">CHAR</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">100</span><span style="color:#ABB2BF;">)     </span><span style="color:#98C379;">NOT</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">NULL,</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#61AFEF;">VALUE</span><span style="color:#ABB2BF;">   </span><span style="color:#98C379;">CHAR</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">100</span><span style="color:#ABB2BF;">)   </span><span style="color:#98C379;">NOT</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">NULL,</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#B392F0;">CREATE </span><span style="color:#9DB1C5;">TABLE</span><span style="color:#B392F0;"> </span><span style="color:#9DB1C5;">test1</span><span style="color:#B392F0;">(</span></span>
<span class="line"><span style="color:#B392F0;">   KEY  </span><span style="color:#9DB1C5;">CHAR</span><span style="color:#B392F0;">(100)     </span><span style="color:#9DB1C5;">NOT</span><span style="color:#B392F0;"> </span><span style="color:#9DB1C5;">NULL,</span></span>
<span class="line"><span style="color:#B392F0;">   VALUE   </span><span style="color:#9DB1C5;">CHAR</span><span style="color:#B392F0;">(100)   </span><span style="color:#9DB1C5;">NOT</span><span style="color:#B392F0;"> </span><span style="color:#9DB1C5;">NULL,</span></span>
<span class="line"><span style="color:#B392F0;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="char-和-varchar-区别" tabindex="-1">CHAR 和 VARCHAR 区别 <a class="header-anchor" href="#char-和-varchar-区别" aria-hidden="true">#</a></h2><p>char 其实就是 character，和 varchar 的区别在于：</p><ol><li>最大长度不同，char 最大 254bytes，而 varchar 最大 32672bytes</li><li>char 的存取速度要比 varchar 快得多，因为其长度固定，方便程序的存储与查找；但是 char 为此付出的是空间的代价，因为其长度固定，所以难免会有多余的空格占位符占据空间，可以说是以空间换取时间效率，而 varchar 则是以空间效率为首位的</li><li>char 的存储方式是，一个英文字符（ASCII）占用 1 个字节，一个汉字占用两个字节；而 varchar 的存储方式是，一个英文字符占用 2 个字节，一个汉字也占用 2 个字节</li><li>char 的长度是不可变的，而 varchar 的长度是可变的，char(n)在数据库占用 n 个字节，在数据库中以空格补足，取出来时末尾的空格将被去掉，varchar(n)在数据库中至少占用 1 个字节，在数据库中末尾的空格将自动去掉，实际占用录入数据长度 ＋ 1 或者 +2 字节</li></ol><h2 id="列出数据库中所有表" tabindex="-1">列出数据库中所有表 <a class="header-anchor" href="#列出数据库中所有表" aria-hidden="true">#</a></h2><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">.tables</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#B392F0;">.tables</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="删除表" tabindex="-1">删除表 <a class="header-anchor" href="#删除表" aria-hidden="true">#</a></h2><p>SQLite 的 <strong>DROP TABLE</strong> 语句用来删除表定义及其所有相关数据、索引、触发器、约束和该表的权限规范</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">DROP</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">TABLE</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">database_name.table_name</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#B392F0;">DROP </span><span style="color:#9DB1C5;">TABLE</span><span style="color:#B392F0;"> </span><span style="color:#9DB1C5;">database_name.table_name</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="插入数据到表中" tabindex="-1">插入数据到表中 <a class="header-anchor" href="#插入数据到表中" aria-hidden="true">#</a></h2><p>SQLite 的 <strong>INSERT INTO</strong> 语句用于向数据库的某个表中添加新的数据行</p><p>column1, column2, ...columnN 是要插入数据的表中的列的名称</p><p>value1, value2, ...valueN 是要插入数据的表中的列的数据</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">INSERT</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">INTO</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">TABLE_NAME</span><span style="color:#ABB2BF;"> (column1, </span><span style="color:#98C379;">column2,...columnN</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">VALUES</span><span style="color:#ABB2BF;"> (value1, </span><span style="color:#98C379;">value2,...valueN</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#B392F0;">INSERT </span><span style="color:#9DB1C5;">INTO</span><span style="color:#B392F0;"> </span><span style="color:#9DB1C5;">TABLE_NAME</span><span style="color:#B392F0;"> (column1, </span><span style="color:#9DB1C5;">column2,...columnN</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">VALUES (value1, </span><span style="color:#9DB1C5;">value2,...valueN</span><span style="color:#B392F0;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如为表中的所有列添加值，可以不指定列名称，但要确保值的顺序与列在表中的顺序一致</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">INSERT</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">INTO</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">TABLE_NAME</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">VALUES</span><span style="color:#ABB2BF;"> (value1,value2,value3,...valueN);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#B392F0;">INSERT </span><span style="color:#9DB1C5;">INTO</span><span style="color:#B392F0;"> </span><span style="color:#9DB1C5;">TABLE_NAME</span><span style="color:#B392F0;"> </span><span style="color:#9DB1C5;">VALUES</span><span style="color:#B392F0;"> (value1,value2,value3,...valueN);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="判断数据库是否打开" tabindex="-1">判断数据库是否打开 <a class="header-anchor" href="#判断数据库是否打开" aria-hidden="true">#</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">isOpenDatabase</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isOpenDatabase</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;first&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;_doc/test.db&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">isOpenDatabase</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.isOpenDatabase({</span></span>
<span class="line"><span style="color:#B392F0;">  name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&#39;first&#39;</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  path</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&#39;_doc/test.db&#39;</span></span>
<span class="line"><span style="color:#B392F0;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="关闭数据库" tabindex="-1">关闭数据库 <a class="header-anchor" href="#关闭数据库" aria-hidden="true">#</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">closeDatabase</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;first&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">success</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;关闭数据库成功&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;关闭数据库失败&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.closeDatabase({</span></span>
<span class="line"><span style="color:#B392F0;">  name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&#39;first&#39;</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  success</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&#39;关闭数据库成功&#39;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  fail</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&#39;关闭数据库失败&#39;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="sqlite-js" tabindex="-1">sqlite.js <a class="header-anchor" href="#sqlite-js" aria-hidden="true">#</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code-dark" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">module</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">exports</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;check&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 数据库名称</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">dbPath</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;_doc/check.db&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 数据库地址</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 判断数据库是否打开,打开返回true, 关闭返回 false</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">isOpen</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isOpenDatabase</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 数据库名称</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbPath</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">// 数据库地址</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 创建或打开数据库</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">openSqlite</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">openDatabase</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbPath</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">success</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 关闭数据库</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">closeSqlite</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">closeDatabase</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">success</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 数据库建表 sql:&#39;CREATE TABLE IF NOT EXISTS dbTable(&quot;id&quot; varchar(50),&quot;name&quot; TEXT)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 创建 CREATE TABLE IF NOT EXISTS 、 dbTable 是表名，不能用数字开头、括号里是表格的表头</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">createTable</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">dbTable</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// executeSql: 执行增删改等操作的SQL语句</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">executeSql</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\`CREATE TABLE IF NOT EXISTS </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">(</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">data</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">)\`</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">success</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 数据库删表 sql:&#39;DROP TABLE dbTable&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">dropTable</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">dbTable</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">executeSql</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\`DROP TABLE </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">success</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 向表格里添加数据 sql:&#39;INSERT INTO dbTable VALUES(&#39;x&#39;,&#39;x&#39;,&#39;x&#39;)&#39;   对应新增</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 或者 sql:&#39;INSERT INTO dbTable (&#39;x&#39;,&#39;x&#39;,&#39;x&#39;) VALUES(&#39;x&#39;,&#39;x&#39;,&#39;x&#39;)&#39;   具体新增</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 插入 INSERT INTO  、 dbTable 是表名、根据表头列名插入列值</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">insertTableData</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">dbTable</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">condition</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// 判断有没有传参</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">dbTable</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 判断传的参是否有值</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">bol</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stringify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;{}&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">bol</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">condition</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`INSERT INTO </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> VALUES(&#39;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">data</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&#39;)\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`INSERT INTO </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> (</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">condition</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">) VALUES(</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">data</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">)\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;">// console.log(sql);</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 表格添加数据</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">executeSql</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#61AFEF;">success</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">              },</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">              }</span></span>
<span class="line"><span style="color:#ABB2BF;">            })</span></span>
<span class="line"><span style="color:#ABB2BF;">          })</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;错误添加&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">          })</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;错误添加&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 根据条件向表格里添加数据  有数据更新、无数据插入</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// (建表时需要设置主键) 例如 --- &quot;roomid&quot; varchar(50) PRIMARY KEY</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">insertOrReplaceData</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">dbTable</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">condition</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// 判断有没有传参</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">dbTable</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">condition</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`INSERT OR REPLACE INTO </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> VALUES(&#39;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">data</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&#39;)\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`INSERT OR REPLACE INTO </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> (</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">condition</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">) VALUES(</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">data</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">)\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// console.log(sql);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;">// 表格添加数据</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">executeSql</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">success</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">          })</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;错误添加&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 查询获取数据库里的数据 sql:&#39;SELECT * FROM dbTable WHERE lname = &#39;lvalue&#39;&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 查询 SELECT * FROM 、 dbTable 是表名、 WHERE 查找条件 lname,lvalue 是查询条件的列名和列值</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">selectTableData</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">dbTable</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">lname</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">lvalue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">cc</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">dd</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">dbTable</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 第一个是表单名称，后两个参数是列表名，用来检索</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">lname</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">cc</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;">// 两个检索条件</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`SELECT * FROM </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> WHERE </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">lname</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> = &#39;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">lvalue</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&#39; AND </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">cc</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> = &#39;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dd</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&#39;\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">lname</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">cc</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;">// 一个检索条件</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`SELECT * FROM </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> WHERE </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">lname</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> = &#39;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">lvalue</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&#39;\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;">// console.log(sql);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">lname</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`SELECT * FROM </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;">// 表格查询数据  执行查询的SQL语句</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">selectSql</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">success</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">          })</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;错误查询&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 删除表里的数据 sql:&#39;DELETE FROM dbTable WHERE lname = &#39;lvalue&#39;&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 删除 DELETE FROM 、 dbTable 是表名、 WHERE 查找条件 lname,lvalue 是查询条件的列名和列值</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">deleteTableData</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">dbTable</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">lname</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">lvalue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">ww</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">ee</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">dbTable</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">lname</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`DELETE FROM </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">ww</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 两个检索条件</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`DELETE FROM </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> WHERE </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">lname</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> = &#39;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">lvalue</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&#39; AND </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">ww</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> = &#39;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">ee</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&#39;\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 一个检索条件</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`DELETE FROM </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> WHERE </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">lname</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> = &#39;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">lvalue</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&#39;\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;">// 删除表数据</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">executeSql</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">success</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">          })</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;错误删除&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 修改数据表里的数据 sql:&quot;UPDATE dbTable SET 列名 = &#39;列值&#39;,列名 = &#39;列值&#39; WHERE lname = &#39;lvalue&#39;&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 修改 UPDATE 、 dbTable 是表名, data: 要修改的列名=修改后列值, lname,lvalue 是查询条件的列名和列值</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">updateTableData</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">dbTable</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">lname</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">lvalue</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">lname</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`UPDATE </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> SET </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">data</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`UPDATE </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> SET </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">data</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> WHERE </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">lname</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> = &#39;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">lvalue</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&#39;\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// WHERE 前面是要修改的列名、列值，后面是条件的列名、列值</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 修改表数据</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">executeSql</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">success</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// sql:&quot;SELECT * FROM dbTable ORDER BY &#39;id&#39; DESC LIMIT 15 OFFSET &#39;num&#39;&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// dbTable 表名, ORDER BY 代表排序默认正序, id 是排序的条件 DESC 代表倒序，从最后一条数据开始拿</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// LIMIT 15 OFFSET &#39;\${num}&#39;,这句的意思是跳过 num 条拿 15 条数据, num 为跳过多少条数据是动态值</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 例 初始num设为0，就从最后的数据开始拿15条，下次不拿刚获取的数据，所以可以让num为15，这样就能一步一步的拿完所有的数据</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">pullSQL</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">dbTable</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">id</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">num</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">plus</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">sqlite</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">selectSql</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dbName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">sql</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\`SELECT * FROM </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">dbTable</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> ORDER BY &#39;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">id</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&#39; DESC LIMIT 15 OFFSET &#39;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">num</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&#39;\`</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">success</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">fail</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">reject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light" tabindex="0"><code><span class="line"><span style="color:#79B8FF;">module</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    dbName</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&#39;check&#39;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// 数据库名称</span></span>
<span class="line"><span style="color:#B392F0;">    dbPath</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&#39;_doc/check.db&#39;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// 数据库地址</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 判断数据库是否打开,打开返回true, 关闭返回 false</span></span>
<span class="line"><span style="color:#B392F0;">    isOpen() {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.isOpenDatabase({</span></span>
<span class="line"><span style="color:#B392F0;">        name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbName</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// 数据库名称</span></span>
<span class="line"><span style="color:#B392F0;">        path</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbPath </span><span style="color:#6B737C;">// 数据库地址</span></span>
<span class="line"><span style="color:#B392F0;">      })</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 创建或打开数据库</span></span>
<span class="line"><span style="color:#B392F0;">    openSqlite() {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.openDatabase({</span></span>
<span class="line"><span style="color:#B392F0;">          name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          path</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbPath</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          success(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            resolve(e);</span></span>
<span class="line"><span style="color:#B392F0;">          }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          fail(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            reject(e)</span></span>
<span class="line"><span style="color:#B392F0;">          }</span></span>
<span class="line"><span style="color:#B392F0;">        })</span></span>
<span class="line"><span style="color:#B392F0;">      })</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 关闭数据库</span></span>
<span class="line"><span style="color:#B392F0;">    closeSqlite() {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.closeDatabase({</span></span>
<span class="line"><span style="color:#B392F0;">          name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          success(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            resolve(e)</span></span>
<span class="line"><span style="color:#B392F0;">          }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          fail(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            reject(e)</span></span>
<span class="line"><span style="color:#B392F0;">          }</span></span>
<span class="line"><span style="color:#B392F0;">        })</span></span>
<span class="line"><span style="color:#B392F0;">      })</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 数据库建表 sql:&#39;CREATE TABLE IF NOT EXISTS dbTable(&quot;id&quot; varchar(50),&quot;name&quot; TEXT)</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 创建 CREATE TABLE IF NOT EXISTS 、 dbTable 是表名，不能用数字开头、括号里是表格的表头</span></span>
<span class="line"><span style="color:#B392F0;">    createTable(dbTable</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> data) {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#6B737C;">// executeSql: 执行增删改等操作的SQL语句</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.executeSql({</span></span>
<span class="line"><span style="color:#B392F0;">          name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          sql</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`CREATE TABLE IF NOT EXISTS </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">(</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">data</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">)\`</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          success(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            resolve(e)</span></span>
<span class="line"><span style="color:#B392F0;">          }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          fail(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            reject(e)</span></span>
<span class="line"><span style="color:#B392F0;">          }</span></span>
<span class="line"><span style="color:#B392F0;">        })</span></span>
<span class="line"><span style="color:#B392F0;">      })</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 数据库删表 sql:&#39;DROP TABLE dbTable&#39;</span></span>
<span class="line"><span style="color:#B392F0;">    dropTable(dbTable) {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.executeSql({</span></span>
<span class="line"><span style="color:#B392F0;">          name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          sql</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`DROP TABLE </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">\`</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          success(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            resolve(e);</span></span>
<span class="line"><span style="color:#B392F0;">          }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          fail(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            reject(e);</span></span>
<span class="line"><span style="color:#B392F0;">          }</span></span>
<span class="line"><span style="color:#B392F0;">        })</span></span>
<span class="line"><span style="color:#B392F0;">      })</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 向表格里添加数据 sql:&#39;INSERT INTO dbTable VALUES(&#39;x&#39;,&#39;x&#39;,&#39;x&#39;)&#39;   对应新增</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 或者 sql:&#39;INSERT INTO dbTable (&#39;x&#39;,&#39;x&#39;,&#39;x&#39;) VALUES(&#39;x&#39;,&#39;x&#39;,&#39;x&#39;)&#39;   具体新增</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 插入 INSERT INTO  、 dbTable 是表名、根据表头列名插入列值</span></span>
<span class="line"><span style="color:#B392F0;">    insertTableData(dbTable</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> data</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> condition) {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#6B737C;">// 判断有没有传参</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (dbTable </span><span style="color:#F97583;">!==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#B392F0;"> data </span><span style="color:#F97583;">!==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#6B737C;">// 判断传的参是否有值</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> bol </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> (</span><span style="color:#79B8FF;">JSON</span><span style="color:#B392F0;">.stringify(data) </span><span style="color:#F97583;">==</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;{}&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (</span><span style="color:#F97583;">!</span><span style="color:#B392F0;">bol) {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (condition </span><span style="color:#F97583;">==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`INSERT INTO </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> VALUES(&#39;</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">data</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">&#39;)\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">          } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`INSERT INTO </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> (</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">condition</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">) VALUES(</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">data</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">)\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">          }</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#6B737C;">// console.log(sql);</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#6B737C;">// 表格添加数据</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.executeSql({</span></span>
<span class="line"><span style="color:#B392F0;">              name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">              sql</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> sql</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">              success(e) {</span></span>
<span class="line"><span style="color:#B392F0;">                resolve(e);</span></span>
<span class="line"><span style="color:#B392F0;">              }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">              fail(e) {</span></span>
<span class="line"><span style="color:#B392F0;">                reject(e);</span></span>
<span class="line"><span style="color:#B392F0;">              }</span></span>
<span class="line"><span style="color:#B392F0;">            })</span></span>
<span class="line"><span style="color:#B392F0;">          })</span></span>
<span class="line"><span style="color:#B392F0;">        } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">            reject(</span><span style="color:#FFAB70;">&quot;错误添加&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">          })</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">      } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          reject(</span><span style="color:#FFAB70;">&quot;错误添加&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">        })</span></span>
<span class="line"><span style="color:#B392F0;">      }</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 根据条件向表格里添加数据  有数据更新、无数据插入</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// (建表时需要设置主键) 例如 --- &quot;roomid&quot; varchar(50) PRIMARY KEY</span></span>
<span class="line"><span style="color:#B392F0;">    insertOrReplaceData(dbTable</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> data</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> condition) {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#6B737C;">// 判断有没有传参</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (dbTable </span><span style="color:#F97583;">!==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#B392F0;"> data </span><span style="color:#F97583;">!==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (condition </span><span style="color:#F97583;">==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`INSERT OR REPLACE INTO </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> VALUES(&#39;</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">data</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">&#39;)\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">        } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`INSERT OR REPLACE INTO </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> (</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">condition</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">) VALUES(</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">data</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">)\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#6B737C;">// console.log(sql);</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#6B737C;">// 表格添加数据</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.executeSql({</span></span>
<span class="line"><span style="color:#B392F0;">            name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            sql</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> sql</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            success(e) {</span></span>
<span class="line"><span style="color:#B392F0;">              resolve(e);</span></span>
<span class="line"><span style="color:#B392F0;">            }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            fail(e) {</span></span>
<span class="line"><span style="color:#B392F0;">              reject(e);</span></span>
<span class="line"><span style="color:#B392F0;">            }</span></span>
<span class="line"><span style="color:#B392F0;">          })</span></span>
<span class="line"><span style="color:#B392F0;">        })</span></span>
<span class="line"><span style="color:#B392F0;">      } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          reject(</span><span style="color:#FFAB70;">&quot;错误添加&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">        })</span></span>
<span class="line"><span style="color:#B392F0;">      }</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 查询获取数据库里的数据 sql:&#39;SELECT * FROM dbTable WHERE lname = &#39;lvalue&#39;&#39;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 查询 SELECT * FROM 、 dbTable 是表名、 WHERE 查找条件 lname,lvalue 是查询条件的列名和列值</span></span>
<span class="line"><span style="color:#B392F0;">    selectTableData(dbTable</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> lname</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> lvalue</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> cc</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> dd) {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (dbTable </span><span style="color:#F97583;">!==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#6B737C;">// 第一个是表单名称，后两个参数是列表名，用来检索</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (lname </span><span style="color:#F97583;">!==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#B392F0;"> cc </span><span style="color:#F97583;">!==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#6B737C;">// 两个检索条件</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`SELECT * FROM </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> WHERE </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">lname</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> = &#39;</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">lvalue</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">&#39; AND </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">cc</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> = &#39;</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dd</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">&#39;\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (lname </span><span style="color:#F97583;">!==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#B392F0;"> cc </span><span style="color:#F97583;">==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#6B737C;">// 一个检索条件</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`SELECT * FROM </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> WHERE </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">lname</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> = &#39;</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">lvalue</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">&#39;\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#6B737C;">// console.log(sql);</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (lname </span><span style="color:#F97583;">==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`SELECT * FROM </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#6B737C;">// 表格查询数据  执行查询的SQL语句</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.selectSql({</span></span>
<span class="line"><span style="color:#B392F0;">            name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            sql</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> sql</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            success(e) {</span></span>
<span class="line"><span style="color:#B392F0;">              resolve(e);</span></span>
<span class="line"><span style="color:#B392F0;">            }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            fail(e) {</span></span>
<span class="line"><span style="color:#B392F0;">              reject(e);</span></span>
<span class="line"><span style="color:#B392F0;">            }</span></span>
<span class="line"><span style="color:#B392F0;">          })</span></span>
<span class="line"><span style="color:#B392F0;">        })</span></span>
<span class="line"><span style="color:#B392F0;">      } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          reject(</span><span style="color:#FFAB70;">&quot;错误查询&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">        });</span></span>
<span class="line"><span style="color:#B392F0;">      }</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 删除表里的数据 sql:&#39;DELETE FROM dbTable WHERE lname = &#39;lvalue&#39;&#39;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 删除 DELETE FROM 、 dbTable 是表名、 WHERE 查找条件 lname,lvalue 是查询条件的列名和列值</span></span>
<span class="line"><span style="color:#B392F0;">    deleteTableData(dbTable</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> lname</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> lvalue</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ww</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ee) {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (dbTable </span><span style="color:#F97583;">!==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (lname </span><span style="color:#F97583;">==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`DELETE FROM </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">        } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (ww </span><span style="color:#F97583;">!==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#6B737C;">// 两个检索条件</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`DELETE FROM </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> WHERE </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">lname</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> = &#39;</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">lvalue</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">&#39; AND </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">ww</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> = &#39;</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">ee</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">&#39;\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">          } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#6B737C;">// 一个检索条件</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`DELETE FROM </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> WHERE </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">lname</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> = &#39;</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">lvalue</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">&#39;\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">          }</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#6B737C;">// 删除表数据</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.executeSql({</span></span>
<span class="line"><span style="color:#B392F0;">            name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            sql</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> sql</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            success(e) {</span></span>
<span class="line"><span style="color:#B392F0;">              resolve(e);</span></span>
<span class="line"><span style="color:#B392F0;">            }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            fail(e) {</span></span>
<span class="line"><span style="color:#B392F0;">              reject(e);</span></span>
<span class="line"><span style="color:#B392F0;">            }</span></span>
<span class="line"><span style="color:#B392F0;">          })</span></span>
<span class="line"><span style="color:#B392F0;">        })</span></span>
<span class="line"><span style="color:#B392F0;">      } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          reject(</span><span style="color:#FFAB70;">&quot;错误删除&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">        });</span></span>
<span class="line"><span style="color:#B392F0;">      }</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 修改数据表里的数据 sql:&quot;UPDATE dbTable SET 列名 = &#39;列值&#39;,列名 = &#39;列值&#39; WHERE lname = &#39;lvalue&#39;&quot;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 修改 UPDATE 、 dbTable 是表名, data: 要修改的列名=修改后列值, lname,lvalue 是查询条件的列名和列值</span></span>
<span class="line"><span style="color:#B392F0;">    updateTableData(dbTable</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> data</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> lname</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> lvalue) {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (lname </span><span style="color:#F97583;">==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`UPDATE </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> SET </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">data</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">      } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> sql </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`UPDATE </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> SET </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">data</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> WHERE </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">lname</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> = &#39;</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">lvalue</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">&#39;\`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">      }</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#6B737C;">// WHERE 前面是要修改的列名、列值，后面是条件的列名、列值</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#6B737C;">// 修改表数据</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.executeSql({</span></span>
<span class="line"><span style="color:#B392F0;">          name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          sql</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> sql</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          success(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            resolve(e);</span></span>
<span class="line"><span style="color:#B392F0;">          }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          fail(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            reject(e);</span></span>
<span class="line"><span style="color:#B392F0;">          }</span></span>
<span class="line"><span style="color:#B392F0;">        })</span></span>
<span class="line"><span style="color:#B392F0;">      })</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// sql:&quot;SELECT * FROM dbTable ORDER BY &#39;id&#39; DESC LIMIT 15 OFFSET &#39;num&#39;&quot;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// dbTable 表名, ORDER BY 代表排序默认正序, id 是排序的条件 DESC 代表倒序，从最后一条数据开始拿</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// LIMIT 15 OFFSET &#39;\${num}&#39;,这句的意思是跳过 num 条拿 15 条数据, num 为跳过多少条数据是动态值</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// 例 初始num设为0，就从最后的数据开始拿15条，下次不拿刚获取的数据，所以可以让num为15，这样就能一步一步的拿完所有的数据</span></span>
<span class="line"><span style="color:#B392F0;">    pullSQL(dbTable</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> id</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> num) {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reject) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#79B8FF;">plus</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">sqlite</span><span style="color:#B392F0;">.selectSql({</span></span>
<span class="line"><span style="color:#B392F0;">          name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.dbName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          sql</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">\`SELECT * FROM </span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">dbTable</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> ORDER BY &#39;</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">id</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">&#39; DESC LIMIT 15 OFFSET &#39;</span><span style="color:#F97583;">\${</span><span style="color:#B392F0;">num</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">&#39;\`</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          success(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            resolve(e);</span></span>
<span class="line"><span style="color:#B392F0;">          }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          fail(e) {</span></span>
<span class="line"><span style="color:#B392F0;">            reject(e);</span></span>
<span class="line"><span style="color:#B392F0;">          }</span></span>
<span class="line"><span style="color:#B392F0;">        })</span></span>
<span class="line"><span style="color:#B392F0;">      })</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br></div></div>`,47),e=[o];function c(r,B,t,y,F,i){return n(),a("div",null,e)}const C=s(p,[["render",c]]);export{b as __pageData,C as default};
